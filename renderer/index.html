<!DOCTYPE html>
<html lang="es">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Corte de Caja</title>
  <!-- Bootstrap CSS -->
  <style>
    .default-font {
      font-family: 'arial';
    }

    /* Estructura básica */
    html,
    body {
      height: 100%;
      margin: 0;
      padding: 0;
    }

    .container-fluid {
      height: 100%;
    }

    /* Ajustes de columnas */
    #columna-izquierda {
      padding: 1rem;
    }

    /* Formularios más compactos */
    .form-floating {
      margin-bottom: 0.5rem;
    }

    /* Botones superiores */
    #botones-superiores {
      position: sticky;
      top: 0;
      z-index: 1000;
      background-color: #f8f9fa;
      padding: 0.5rem 0;
    }

    /* Ajustes para pantallas pequeñas */
    @media (max-width: 767.98px) {
      .col-md-6 {
        flex: 0 0 100%;
        max-width: 100%;
      }

      #columna-derecha {
        display: none;
      }

      .btn-sm {
        font-size: 0.875rem;
        padding: 0.25rem 0.5rem;
      }

      h4,
      h3 {
        font-size: 1rem;
      }
    }

    /* Ajustes generales */
    h4,
    h3 {
      font-size: 1.25rem;
    }

    .card {
      padding: 1rem;
    }

    /* Contenedor de vales con scroll */
    .vales-container {
      max-height: 150px;
      overflow-y: auto;
      margin-top: 0.5rem;
      padding-left: 10px;
      border: 1px solid #ccc;
      border-radius: 5px;
      background-color: #f9f9f9;
    }

    .vale-item {
      display: flex;
      justify-content: space-between;
      align-items: center;
      margin-bottom: 5px;
    }

    .vale-item input {
      width: 70%;
    }

    .vale-item button {
      margin-left: 10px;
    }
  </style>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons/font/bootstrap-icons.css" rel="stylesheet">
</head>

<body class="bg-light default-font">

  <div class="container-fluid">
    <!-- Pantalla principal con los formularios y el reporte -->
    <div id="pantallaPrincipal" class="row h-100">
      <!-- Columna izquierda con los formularios -->
      <div id="columna-izquierda" class="col-md-9">
        <!-- Botones superiores -->
        <div id="botones-superiores" class="d-flex justify-content-end gap-2 mb-3">
          <button type="button" class="btn btn-outline-secondary btn-sm" data-bs-toggle="modal"
            data-bs-target="#tipoCambioModal">
            <i class="bi bi-currency-dollar"></i>
            Configurar Tipo de Cambio
          </button>
          <button type="button" class="btn btn-outline-danger btn-sm" data-bs-toggle="modal"
            data-bs-target="#alcanzareNominaModal">
            <span data-bs-toggle="tooltip" title="Este tooltip se muestra al pasar el cursor.">
              <i class="bi bi-wallet2"></i>
              ¿Alcanzaré a cobrar mi nómina?
            </span>
          </button>

          <button type="button" id="generarCorte" class="btn btn-primary btn-sm">
            <i class="bi bi-clipboard-check"></i> Generar Corte
          </button>
        </div>

        <!-- Formularios de las Librerías y Tiendas -->
        <div class="row g-3">
          <!-- Librería 1 -->
          <div class="col-md-6">
            <form id="corteForm1" class="card p-3 shadow-sm">
              <h4 class="text-center mb-2">
                <i class="bi bi-shop"></i> LIBRERÍA 1
              </h4>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="totalLibreria1" class="form-control form-control-sm" step="0.01" required>
                    <label for="totalLibreria1">Total</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="tarjetaLibreria1" class="form-control form-control-sm" step="0.01"
                      required>
                    <label for="tarjetaLibreria1">Tarjeta</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating mb-1">
                    <input type="number" id="dolaresLibreria1" class="form-control form-control-sm" step="0.01">
                    <label for="dolaresLibreria1">Dólares</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="d-flex align-items-center mb-1">
                    <label class="me-auto mb-0">Vales: $<span id="totalValesLibreria1">0.00</span></label>
                    <button type="button" id="agregarVale1" class="btn btn-outline-secondary btn-sm"
                      data-shop="Libreria1" data-bs-toggle="modal" data-bs-target="#agregarValeModal">
                      <i class="bi bi-plus-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div id="vales-container1" class="vales-container"></div>
            </form>
          </div>

          <!-- Librería 2 -->
          <div class="col-md-6">
            <form id="corteForm2" class="card p-3 shadow-sm">
              <h4 class="text-center mb-2">
                <i class="bi bi-shop"></i> LIBRERÍA 2
              </h4>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="totalLibreria2" class="form-control form-control-sm" step="0.01" required>
                    <label for="totalLibreria2">Total</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="tarjetaLibreria2" class="form-control form-control-sm" step="0.01"
                      required>
                    <label for="tarjetaLibreria2">Tarjeta</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating mb-1">
                    <input type="number" id="dolaresLibreria2" class="form-control form-control-sm" step="0.01">
                    <label for="dolaresLibreria2">Dólares</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="d-flex align-items-center mb-1">
                    <label class="me-auto mb-0">Vales: $<span id="totalValesLibreria2">0.00</span></label>
                    <button type="button" id="agregarVale2" class="btn btn-outline-secondary btn-sm"
                      data-shop="Libreria2" data-bs-toggle="modal" data-bs-target="#agregarValeModal">
                      <i class="bi bi-plus-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div id="vales-container2" class="vales-container"></div>
            </form>
          </div>
        </div>

        <!-- Segunda fila: Tienda 1 y Tienda 2 -->
        <div class="row g-3">
          <!-- Tienda 1 -->
          <div class="col-md-6">
            <form id="corteForm3" class="card p-3 shadow-sm">
              <h4 class="text-center mb-2">
                <i class="bi bi-shop-window"></i> TIENDA 1
              </h4>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="totalTienda1" class="form-control form-control-sm" step="0.01" required>
                    <label for="totalTienda1">Total</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="tarjetaTienda1" class="form-control form-control-sm" step="0.01" required>
                    <label for="tarjetaTienda1">Tarjeta</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating mb-1">
                    <input type="number" id="dolaresTienda1" class="form-control form-control-sm" step="0.01">
                    <label for="dolaresTienda1">Dólares</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="d-flex align-items-center mb-1">
                    <label class="me-auto mb-0">Vales: $<span id="totalValesTienda1">0.00</span></label>
                    <button type="button" id="agregarVale3" class="btn btn-outline-secondary btn-sm" data-shop="Tienda1"
                      data-bs-toggle="modal" data-bs-target="#agregarValeModal">
                      <i class="bi bi-plus-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div id="vales-container3" class="vales-container"></div>
            </form>
          </div>

          <!-- Tienda 2 -->
          <div class="col-md-6">
            <form id="corteForm4" class="card p-3 shadow-sm">
              <h4 class="text-center mb-2">
                <i class="bi bi-shop-window"></i> TIENDA 2
              </h4>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="totalTienda2" class="form-control form-control-sm" step="0.01" required>
                    <label for="totalTienda2">Total</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="form-floating">
                    <input type="number" id="tarjetaTienda2" class="form-control form-control-sm" step="0.01" required>
                    <label for="tarjetaTienda2">Tarjeta</label>
                  </div>
                </div>
              </div>
              <div class="row">
                <div class="col-6">
                  <div class="form-floating mb-1">
                    <input type="number" id="dolaresTienda2" class="form-control form-control-sm" step="0.01">
                    <label for="dolaresTienda2">Dólares</label>
                  </div>
                </div>
                <div class="col-6">
                  <div class="d-flex align-items-center mb-1">
                    <label class="me-auto mb-0">Vales: $<span id="totalValesTienda2">0.00</span></label>
                    <button type="button" id="agregarVale4" class="btn btn-outline-secondary btn-sm" data-shop="Tienda2"
                      data-bs-toggle="modal" data-bs-target="#agregarValeModal">
                      <i class="bi bi-plus-circle"></i>
                    </button>
                  </div>
                </div>
              </div>
              <div id="vales-container4" class="vales-container"></div>
            </form>
          </div>
        </div>
      </div>

      <!-- Columna derecha con el reporte -->
      <div id="columna-derecha" class="col-md-3 d-flex flex-column h-100 overflow-auto">
        <div id="reporte" class="card p-3 shadow-md border-dark text-center flex-grow-1 default-font">
          <!-- Contenido del reporte (sin cambios) -->
        </div>
      </div>
    </div>

    <!-- Modales -->
    <!-- Modal para configurar el tipo de cambio -->
    <div class="modal fade" id="tipoCambioModal" tabindex="-1" aria-labelledby="tipoCambioModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="tipoCambioModalLabel">Configurar Tipo de Cambio</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="tipoCambioForm">
              <div class="form-floating mb-3">
                <input type="number" id="tipoCambio" class="form-control" step="0.01" required>
                <label for="tipoCambio">Tipo de Cambio (Dólares)</label>
              </div>
              <button type="button" id="guardarTipoCambio" class="btn btn-primary w-100">Guardar</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para verificar la nómina -->
    <div class="modal fade" id="alcanzareNominaModal" tabindex="-1" aria-labelledby="alcanzareNominaModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="alcanzareNominaModalLabel">¿Alcanzaré a cobrar mi nómina?</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="alcanzareNominaForm">
              <div class="form-floating mb-3">
                <input type="number" id="miNomina" class="form-control" step="0.01" required>
                <label for="miNomina">Introduce tu nómina aquí</label>
                <!-- Agregar un pequeño texto para mostrar el resultado -->
                <div id="feedbackNomina" class="form-text"></div>
              </div>
              <div class="form-floating mb-3">
                <input type="number" id="nominaTotal" class="form-control" step="0.01" required>
                <label for="nominaTotal">Total</label>
                <div id="feedbackTotal" class="form-text"></div>
              </div>
              <div class="form-floating mb-3">
                <input type="number" id="nominaDolares" class="form-control" step="0.01">
                <label for="nominaDolares">Dólares</label>
              </div>
              <div class="form-floating mb-3">
                <input type="number" id="nominaVales" class="form-control" step="0.01">
                <label for="nominaVales">Vales</label>
              </div>
              <button type="button" id="verificarNomina" class="btn btn-primary w-100">Verificar</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para agregar vales -->
    <div class="modal fade" id="agregarValeModal" tabindex="-1" aria-labelledby="agregarValeModalLabel"
      aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title">Agregar Vale</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <form id="agregarValeForm">
              <div class="mb-3">
                <label for="valeDescripcion" class="form-label">Descripción</label>
                <input type="text" class="form-control" id="valeDescripcion" required>
              </div>
              <div class="mb-3">
                <label for="valeValor" class="form-label">Valor</label>
                <input type="number" class="form-control" id="valeValor" step="0.01" required>
              </div>
              <button type="button" id="guardarVale" class="btn btn-primary w-100">Agregar</button>
            </form>
          </div>
        </div>
      </div>
    </div>

    <!-- Modal para Ayuda -->
    <!-- Modal para Ayuda -->
    <div class="modal fade" id="ayudaModal" tabindex="-1" aria-labelledby="ayudaModalLabel" aria-hidden="true">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="ayudaModalLabel">Ayuda - Cómo usar el programa</h5>
            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
          </div>
          <div class="modal-body">
            <h6><strong>Paso 1: Configurar el tipo de cambio</strong></h6>
            <p>Antes de generar el corte de caja, asegúrate de configurar el tipo de cambio. Para hacerlo, haz clic en
              el
              botón con el ícono de <i class="bi bi-currency-dollar"></i> en la parte superior. Esto abrirá un modal
              donde
              podrás ingresar el tipo de cambio actual de dólares.</p>

            <h6><strong>Paso 2: Ingresar los datos de las sucursales</strong></h6>
            <p>En la pantalla principal, verás formularios separados para las sucursales (Librerías y Tiendas). Ingresa
              los
              siguientes datos para cada una:</p>
            <ul>
              <li><strong>Total:</strong> El monto total de ventas del día.</li>
              <li><strong>Tarjeta:</strong> El monto de ventas hechas con tarjeta.</li>
              <li><strong>Dólares:</strong> El monto recibido en dólares (si aplica).</li>
              <li><strong>Vales:</strong> Puedes agregar uno o más vales utilizando el botón con el ícono de <i
                  class="bi bi-plus-circle"></i>.</li>
            </ul>

            <h6><strong>Paso 3: Agregar vales</strong></h6>
            <p>Para agregar vales, haz clic en el botón con el ícono <i class="bi bi-plus-circle"></i> en la sección de
              vales. Esto abrirá un modal donde puedes ingresar la descripción y el valor de cada vale. Puedes agregar
              varios vales si es necesario.</p>

            <h6><strong>Paso 4: Verificar si alcanzarás a cobrar la nómina</strong></h6>
            <p>Si deseas verificar si podrás cobrar tu nómina, haz clic en el botón con el ícono de <i
                class="bi bi-wallet2"></i> en la parte superior. Se abrirá un modal donde puedes ingresar tu nómina y
              otros
              datos para hacer el cálculo.</p>

            <h6><strong>Paso 5: Generar el corte de caja</strong></h6>
            <p>Una vez que hayas ingresado todos los datos de las sucursales, haz clic en el botón "Generar Corte" en la
              parte superior. Esto generará un reporte con el resumen de las ventas por sucursal.</p>

            <h6><strong>Notas adicionales</strong></h6>
            <p>El programa guarda automáticamente el tipo de cambio que ingreses para la próxima vez que lo utilices.
              Asegúrate de revisar los datos antes de generar el corte.</p>
          </div>
          <div class="modal-footer">
            <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cerrar</button>
          </div>
        </div>
      </div>
    </div>

    <!-- Bootstrap JS y Popper.js -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script src="./renderer.js"></script>
  </div>
</body>

</html>